var A=Object.defineProperty;var m=s=>{throw TypeError(s)};var M=(s,r,e)=>r in s?A(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var d=(s,r,e)=>M(s,typeof r!="symbol"?r+"":r,e),k=(s,r,e)=>r.has(s)||m("Cannot "+e);var b=(s,r,e)=>r.has(s)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,e);var c=(s,r,e)=>(k(s,r,"access private method"),e);var n,w,h;import{rgb2temperature as x,isInRange as P,randomizeArr as v,rgbToCMYK as T}from"./utils";import{wcagContrast as y,parse as $,converter as C}from"culori";import j from"./en";const W={rgb:C("rgb"),hsl:C("hsl")},I={rgb:["r","g","b"],cmyk:["c","m","y","k"],hsl:["h","s","l"]};class N{constructor(r,e=j){b(this,n);d(this,"formats",{});d(this,"currentColor",null);this.color=r,this.descriptions=e.descriptions,this.temperatures=e.temperatures,this.percentWords=e.percentWords?[...e.percentWords].sort((t,o)=>t.maxPercentile-o.maxPercentile):[]}set color(r){this.currentColor=c(this,n,w).call(this,r);const e=W.rgb(this.currentColor);this.formats.rgb=e,this.formats.hsl=W.hsl(this.currentColor),this.formats.cmyk=T(e)}get color(){return this.currentColor}get temperatureWords(){const r=x(this.formats.rgb);return this.temperatures.reduce((e,t)=>Math.abs(t.value-r)<Math.abs(e.value-r)?t:e,{value:0})}percentages(r="rgb"){if(!["rgb","cmyk"].includes(r))throw new TypeError('Invalid color model. Use "rgb" or "cmyk" for percentages.');if(!this.formats[r])throw new TypeError(`Color format "${r}" is not available. Ensure color is set.`);const e=this.formats[r],t=I[r].map(i=>e[i]),o=t.reduce((i,a)=>i+a,0);return t.map(i=>o?i/o:0)}percentageWords(r="rgb"){return this.percentages(r).map(e=>{const t=this.percentWords.find(o=>o.maxPercentile>=e);return t?t.word:"entirely"})}get descriptiveWords(){return c(this,n,h).call(this,"descriptive")}get nouns(){return c(this,n,h).call(this,"nouns")}get meanings(){return c(this,n,h).call(this,"meanings")}get usage(){return c(this,n,h).call(this,"usage")}get description(){return c(this,n,h).call(this,"description")}get bestContrast(){return y(this.color,"black")>y(this.color,"white")?"black":"white"}getDescriptiveList(r,e){let t=[...this.descriptiveWords];if(r&&(t=v(t)),e&&(t=t.slice(0,e)),t.length===0)return"";if(t.length>1){const o=t.pop();return`${t.join(", ")} and ${o}`}else return t[0]}}n=new WeakSet,w=function(r){const e=$(r);if(!e)throw new TypeError(`Invalid color: "${r}". Check the culori documentation.`);return e},h=function(r="descriptive",e=!1,t){const o=this.descriptions.reduce((i,a)=>{if(!a.hasOwnProperty(r))return i;const E=Array.isArray(a[r])?a[r].filter(u=>typeof u=="string"&&u.trim().length>0):[];return Object.keys(a.criteria).every(u=>{const p=this.formats[u];return p?Object.entries(a.criteria[u]).every(([f,l])=>{if(!(f in p)||p[f]===void 0||p[f]===null||l===null)return!0;let g=p[f];return f==="h"&&(g=Math.round(g)),Array.isArray(l)?P(g,l[0],l[1]):isNaN(l)?!1:g===l}):!1})?[...new Set([...i,...E])]:i},[]);return e?v(o).slice(0,t):o.slice(0,t)};export default N;
