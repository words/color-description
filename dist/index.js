var M=Object.defineProperty;var m=s=>{throw TypeError(s)};var k=(s,r,e)=>r in s?M(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var f=(s,r,e)=>k(s,typeof r!="symbol"?r+"":r,e),E=(s,r,e)=>r.has(s)||m("Cannot "+e);var b=(s,r,e)=>r.has(s)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,e);var c=(s,r,e)=>(E(s,r,"access private method"),e);var o,w,h;import{rgb2temperature as j,isInRange as x,randomizeArr as v,rgbToCMYK as I}from"./utils";import{wcagContrast as y,parse as N,converter as C}from"culori";import O from"./en";const W={rgb:C("rgb"),hsl:C("hsl")},T={rgb:["r","g","b"],cmyk:["c","m","y","k"],hsl:["h","s","l"]};class D{constructor(r,e=O){b(this,o);f(this,"formats",{});f(this,"currentColor",null);this.color=r,this.descriptions=e.descriptions,this.temperatures=e.temperatures,this.percentWords=e.percentWords}set color(r){this.currentColor=c(this,o,w).call(this,r);const e=W.rgb(this.currentColor);this.formats.rgb=e,this.formats.hsl=W.hsl(this.currentColor),this.formats.cmyk=I(e)}get color(){return this.currentColor}get temperatureWords(){const r=j(this.formats.rgb);return this.temperatures.reduce((e,t)=>Math.abs(t.value-r)<Math.abs(e.value-r)?t:e,{value:0})}percentages(r="rgb"){if(!["rgb","cmyk"].includes(r))throw new TypeError('Invalid color model. Use "rgb" or "cmyk" for percentages.');const e=this.formats[r],t=T[r].map(n=>e[n]),i=t.reduce((n,a)=>n+a,0);return t.map(n=>i?n/i:0)}percentageWords(r="rgb"){return this.percentages(r).map(e=>this.percentWords.find(t=>t.maxPercentile>=e).word)}get descriptiveWords(){return c(this,o,h).call(this,"descriptive")}get nouns(){return c(this,o,h).call(this,"nouns")}get meanings(){return c(this,o,h).call(this,"meanings")}get usage(){return c(this,o,h).call(this,"usage")}get description(){return c(this,o,h).call(this,"description")}get bestContrast(){return y(this.color,"black")>y(this.color,"white")?"black":"white"}getDescriptiveList(r,e){let t=[...this.descriptiveWords];if(r&&(t=v(t)),e&&(t=t.slice(0,e)),t.length>1){const i=t.pop();return`${t.join(", ")} and ${i}`}else return t[0]}}o=new WeakSet,w=function(r){const e=N(r);if(!e)throw new TypeError("Invalid color. Check the culori documentation.");return e},h=function(r="descriptive",e=!1,t){const i=this.descriptions.reduce((n,a)=>{if(!a.hasOwnProperty(r))return n;const A=Array.isArray(a[r])?a[r].filter(u=>typeof u=="string"&&u.trim().length>0):[];return Object.keys(a.criteria).every(u=>{const g=this.formats[u];return Object.entries(a.criteria[u]).every(([p,l])=>{if(!(p in g)||g[p]===void 0||g[p]===null||l===null)return!0;let d=g[p];return p==="h"&&(d=Math.round(d)),Array.isArray(l)?x(d,l[0],l[1]):isNaN(l)?!1:d===l})})?[...new Set([...n,...A])]:n},[]);return e?v(i).slice(0,t):i.slice(0,t)};export default D;
