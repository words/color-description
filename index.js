var M=Object.defineProperty;var m=s=>{throw TypeError(s)};var k=(s,r,e)=>r in s?M(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var d=(s,r,e)=>k(s,typeof r!="symbol"?r+"":r,e),E=(s,r,e)=>r.has(s)||m("Cannot "+e);var b=(s,r,e)=>r.has(s)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,e);var a=(s,r,e)=>(E(s,r,"access private method"),e);var o,W,h;import{rgb2temperature as j,isInRange as A,randomizeArr as v,rgbToCMYK as x}from"./utils";import{wcagContrast as C,parse as I,converter as y}from"culori";import N from"./en";const w={rgb:y("rgb"),hsl:y("hsl")},O={rgb:["r","g","b"],cmyk:["c","m","y","k"],hsl:["h","s","l"]};class T{constructor(r,e=N){b(this,o);d(this,"formats",{});d(this,"currentColor",null);this.color=r,this.descriptions=e.descriptions,this.temperatures=e.temperatures,this.percentWords=e.percentWords}set color(r){this.currentColor=a(this,o,W).call(this,r);const e=w.rgb(this.currentColor);this.formats.rgb=e,this.formats.hsl=w.hsl(this.currentColor),this.formats.cmyk=x(e)}get color(){return this.currentColor}get temperatureWords(){const r=j(this.formats.rgb);return this.temperatures.reduce((e,t)=>Math.abs(t.value-r)<Math.abs(e.value-r)?t:e,{value:0})}percentages(r="rgb"){if(!["rgb","cmyk"].includes(r))throw new TypeError('Invalid color model. Use "rgb" or "cmyk" for percentages.');const e=this.formats[r],t=O[r].map(n=>e[n]),i=t.reduce((n,c)=>n+c,0);return t.map(n=>i?n/i:0)}percentageWords(r="rgb"){return this.percentages(r).map(e=>this.percentWords.find(t=>t.maxPercentile>=e).word)}get descriptiveWords(){return a(this,o,h).call(this,"descriptive")}get nouns(){return a(this,o,h).call(this,"nouns")}get meanings(){return a(this,o,h).call(this,"meanings")}get usage(){return a(this,o,h).call(this,"usage")}get description(){return a(this,o,h).call(this,"description")}get bestContrast(){return C(this.color,"black")>C(this.color,"white")?"black":"white"}getDescriptiveList(r,e){let t=[...this.descriptiveWords];if(r&&(t=v(t)),e&&(t=t.slice(0,e)),t.length>1){const i=t.pop();return`${t.join(", ")} and ${i}`}else return t[0]}}o=new WeakSet,W=function(r){try{return I(r)}catch{throw new TypeError("Invalid color. Check the chroma-js documentation.")}},h=function(r="descriptive",e=!1,t){const i=this.descriptions.reduce((n,c)=>c.hasOwnProperty(r)&&Object.keys(c.criteria).every(f=>{const p=this.formats[f];return Object.entries(c.criteria[f]).every(([u,l])=>{if(!(u in p)||p[u]===void 0||p[u]===null||l===null)return!0;let g=p[u];return u==="h"&&(g=Math.round(g)),Array.isArray(l)?A(g,l[0],l[1]):isNaN(l)?!1:g===l})})?[...new Set([...n,...c[r]])]:n,[]);return e?v(i).slice(0,t):i.slice(0,t)};export default T;
