var k=Object.defineProperty;var m=s=>{throw TypeError(s)};var E=(s,r,e)=>r in s?k(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var g=(s,r,e)=>E(s,typeof r!="symbol"?r+"":r,e),M=(s,r,e)=>r.has(s)||m("Cannot "+e);var b=(s,r,e)=>r.has(s)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,e);var c=(s,r,e)=>(M(s,r,"access private method"),e);var o,W,h;import{rgb2temperature as j,isInRange as A,randomizeArr as v,rgbToCMYK as x}from"./utils";import{wcagContrast as C,parse as I,converter as y}from"culori";import N from"./en";const w={rgb:y("rgb"),hsl:y("hsl")},O={rgb:["r","g","b"],cmyk:["c","m","y","k"],hsl:["h","s","l"]};class T{constructor(r,e=N){b(this,o);g(this,"formats",{});g(this,"currentColor",null);this.color=r,this.descriptions=e.descriptions,this.temperatures=e.temperatures,this.percentWords=e.percentWords}set color(r){this.currentColor=c(this,o,W).call(this,r);const e=w.rgb(this.currentColor);this.formats.rgb=e,this.formats.hsl=w.hsl(this.currentColor),this.formats.cmyk=x(e)}get color(){return this.currentColor}get temperatureWords(){const r=j(this.formats.rgb);return this.temperatures.reduce((e,t)=>Math.abs(t.value-r)<Math.abs(e.value-r)?t:e,{value:0})}percentages(r="rgb"){if(!["rgb","cmyk"].includes(r))throw new TypeError('Invalid color model. Use "rgb" or "cmyk" for percentages.');const e=this.formats[r],t=O[r].map(n=>e[n]),i=t.reduce((n,a)=>n+a,0);return t.map(n=>i?n/i:0)}percentageWords(r="rgb"){return this.percentages(r).map(e=>this.percentWords.find(t=>t.maxPercentile>=e).word)}get descriptiveWords(){return c(this,o,h).call(this,"descriptive")}get nouns(){return c(this,o,h).call(this,"nouns")}get meanings(){return c(this,o,h).call(this,"meanings")}get usage(){return c(this,o,h).call(this,"usage")}get description(){return c(this,o,h).call(this,"description")}get bestContrast(){return C(this.color,"black")>C(this.color,"white")?"black":"white"}getDescriptiveList(r,e){let t=[...this.descriptiveWords];if(r&&(t=v(t)),e&&(t=t.slice(0,e)),t.length>1){const i=t.pop();return`${t.join(", ")} and ${i}`}else return t[0]}}o=new WeakSet,W=function(r){try{return I(r)}catch{throw new TypeError("Invalid color. Check the chroma-js documentation.")}},h=function(r="descriptive",e=!1,t){const i=this.descriptions.reduce((n,a)=>a.hasOwnProperty(r)&&Object.keys(a.criteria).every(d=>{const u=this.formats[d];return Object.entries(a.criteria[d]).every(([p,l])=>{if(!(p in u)||u[p]===void 0||u[p]===null||l===null)return!0;const f=u[p];return Array.isArray(l)?A(f,l[0],l[1]):isNaN(l)?!1:f===l})})?[...new Set([...n,...a[r]])]:n,[]);return e?v(i).slice(0,t):i.slice(0,t)};export default T;
