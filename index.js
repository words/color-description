var A=Object.defineProperty;var m=s=>{throw TypeError(s)};var M=(s,r,t)=>r in s?A(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var d=(s,r,t)=>M(s,typeof r!="symbol"?r+"":r,t),k=(s,r,t)=>r.has(s)||m("Cannot "+t);var b=(s,r,t)=>r.has(s)?m("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,t);var c=(s,r,t)=>(k(s,r,"access private method"),t);var o,W,h;import{rgb2temperature as T,isInRange as $,randomizeArr as v,rgbToCMYK as j}from"./utils";import{wcagContrast as y,parse as x,converter as C}from"culori";import I from"./en";const w={rgb:C("rgb"),hsl:C("hsl")},N={rgb:["r","g","b"],cmyk:["c","m","y","k"],hsl:["h","s","l"]};class O{constructor(r,t=I){b(this,o);d(this,"formats",{});d(this,"currentColor",null);this.color=r,this.descriptions=t.descriptions,this.temperatures=t.temperatures,this.percentWords=t.percentWords}set color(r){this.currentColor=c(this,o,W).call(this,r);const t=w.rgb(this.currentColor);this.formats.rgb=t,this.formats.hsl=w.hsl(this.currentColor),this.formats.cmyk=j(t)}get color(){return this.currentColor}get temperatureWords(){const r=T(this.formats.rgb);return this.temperatures.reduce((t,e)=>Math.abs(e.value-r)<Math.abs(t.value-r)?e:t,{value:0})}percentages(r="rgb"){if(!["rgb","cmyk"].includes(r))throw new TypeError('Invalid color model. Use "rgb" or "cmyk" for percentages.');if(!this.formats[r])throw new TypeError(`Color format "${r}" is not available. Ensure color is set.`);const t=this.formats[r],e=N[r].map(i=>t[i]),n=e.reduce((i,a)=>i+a,0);return e.map(i=>n?i/n:0)}percentageWords(r="rgb"){return this.percentages(r).map(t=>{const e=this.percentWords.find(n=>n.maxPercentile>=t);return e?e.word:"entirely"})}get descriptiveWords(){return c(this,o,h).call(this,"descriptive")}get nouns(){return c(this,o,h).call(this,"nouns")}get meanings(){return c(this,o,h).call(this,"meanings")}get usage(){return c(this,o,h).call(this,"usage")}get description(){return c(this,o,h).call(this,"description")}get bestContrast(){return y(this.color,"black")>y(this.color,"white")?"black":"white"}getDescriptiveList(r,t){let e=[...this.descriptiveWords];if(r&&(e=v(e)),t&&(e=e.slice(0,t)),e.length===0)return"";if(e.length>1){const n=e.pop();return`${e.join(", ")} and ${n}`}else return e[0]}}o=new WeakSet,W=function(r){const t=x(r);if(!t)throw new TypeError(`Invalid color: "${r}". Check the culori documentation.`);return t},h=function(r="descriptive",t=!1,e){const n=this.descriptions.reduce((i,a)=>{if(!a.hasOwnProperty(r))return i;const E=Array.isArray(a[r])?a[r].filter(u=>typeof u=="string"&&u.trim().length>0):[];return Object.keys(a.criteria).every(u=>{const g=this.formats[u];return Object.entries(a.criteria[u]).every(([p,l])=>{if(!(p in g)||g[p]===void 0||g[p]===null||l===null)return!0;let f=g[p];return p==="h"&&(f=Math.round(f)),Array.isArray(l)?$(f,l[0],l[1]):isNaN(l)?!1:f===l})})?[...new Set([...i,...E])]:i},[]);return t?v(n).slice(0,e):n.slice(0,e)};export default O;
