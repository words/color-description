var M=typeof require!="undefined"?require:s=>{throw new Error('Dynamic require of "'+s+'" is not supported')};var y=(s,e,r)=>{if(!e.has(s))throw TypeError("Cannot "+r)};var f=(s,e,r)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,r)};var i=(s,e,r)=>(y(s,e,"access private method"),r);var p,w,n,l;import u from"chroma-js";import C from"./en";const W=(s,e,r)=>s>=e&&s<=r,m=s=>{let e=[...s];for(let r=e.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e};class b{constructor(e,r=C){f(this,p);f(this,n);this.color=e,this.descriptions=r.descriptions,this.temperatures=r.temperatures,this.percentWords=r.percentWords}set color(e){this.currentColor=i(this,p,w).call(this,e)}get color(){return this.currentColor}get temperatureWords(){const e=this.color.temperature();return this.temperatures.reduce((r,t)=>Math.abs(t.value-e)<Math.abs(r.value-e)?t:r,{value:0})}percentages(e="gl"){const r=this.color[e]();e==="gl"&&r.pop();const t=r.reduce((o,c)=>o+c,0);return r.map(o=>t?o/t:0)}percentageWords(e="gl"){return this.percentages(e).map(r=>this.percentWords.find(t=>t.maxPercentile>=r).word)}get descriptiveWords(){return i(this,n,l).call(this,"descriptive")}get nouns(){return i(this,n,l).call(this,"nouns")}get meanings(){return i(this,n,l).call(this,"meanings")}get usage(){return i(this,n,l).call(this,"usage")}get description(){return i(this,n,l).call(this,"description")}get bestContrast(){return u.contrast(this.color,"black")>u.contrast(this.color,"white")?"black":"white"}getDescriptiveList(e,r){let t=[...this.descriptiveWords];if(e&&(t=m(t)),r&&(t=t.slice(0,r)),t.length>1){const o=t.pop();return`${t.join(", ")} and ${o}`}else return t[0]}}p=new WeakSet,w=function(e){if(u.valid(e))return u(e);throw new TypeError("Invalid color. Check the chroma.js documentation.")},n=new WeakSet,l=function(e="descriptive",r=!1,t){const o=this.descriptions.reduce((c,h)=>h.hasOwnProperty(e)&&Object.keys(h.criteria).every(d=>{const g=this.color[d]();return["hsl","gl","rgb"].includes(d)&&g.pop(),h.criteria[d].every((a,v)=>a===null?!0:Array.isArray(a)?W(g[v],a[0],a[1]):isNaN(a)?!1:g[v]===a)})?[...new Set([...c,...h[e]])]:c,[]);return r?m(o).slice(0,t):o.slice(0,t)};export default b;
